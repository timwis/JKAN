{% comment %}
  Recursively gets the value of an object using bracket notation
  ie. allows access to foo[bar][baz]
  Usage: include functions/deep-value.html object=dataset field_name=foo[bar][baz]
{% endcomment %}

{% assign value = include.object %}
{% assign field_layers = include.field_name | remove: "[]" | remove: "]" | split: "[" %}
{% for layer in field_layers %}
  {% assign value = value[layer] %}
{% endfor %}